<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>研学旅行后台管理系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" th:href="@{/css/font.css}">
    <link rel="stylesheet" th:href="@{/css/xadmin.css}">
    <link rel="stylesheet" href="https://cdn.bootcss.com/Swiper/3.4.2/css/swiper.min.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/Swiper/3.4.2/js/swiper.jquery.min.js"></script>
    <script type="text/javascript" th:src="@{/js/echarts.js}"></script>
    <script src="static/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="@{/js/xadmin.js}"></script>
</head>
<body>
    <!-- 顶部开始 -->
    <div class="container">
        <div class="logo"><a href="./index.html">研学旅行后台管理系统</a></div>
        <div class="open-nav"><i class="iconfont">&#xe699;</i></div>
        <ul class="layui-nav right" lay-filter="">
          <li class="layui-nav-item">
            <a href="javascript:;">admin</a>
            <dl class="layui-nav-child"> <!-- 二级菜单 -->
              <dd><a href="">个人信息</a></dd>
              <dd><a href="">切换帐号</a></dd>
              <dd><a href="./login.html">退出</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item"><a href="/">前台首页</a></li>
        </ul>
    </div>
    <!-- 顶部结束 -->
    <!-- 中部开始 -->
    <div class="wrapper">
        <!-- 左侧菜单开始 -->
        <div class="left-nav">
          <div id="side-nav">
            <ul id="nav">
                <li class="list" current>
                    <a href="./index.html">
                        <i class="iconfont">&#xe761;</i>
                        欢迎页面
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                </li>
                <li class="list">
                    <a href="javascript:;">
                        <i class="iconfont">&#xe70b;</i>
                        客户管理
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu ">
                        <li >
                            <a href="member-list.html">
                                <i class="iconfont">&#xe6a7;</i>
                                客户列表
                            </a>
                        </li>
                        <li>
                            <a href="member-del.html">
                                <i class="iconfont">&#xe6a7;</i>
                                客户删除
                            </a>
                        </li>
                        <li>
                            <a href="member-level.html">
                                <i class="iconfont">&#xe6a7;</i>
                                活动推荐
                            </a>
                        </li>
                        <li>
                            <a href="member-kiss.html">
                                <i class="iconfont">&#xe6a7;</i>
                               活动通知
                            </a>
                        </li>
                        <li>
                            <a href="member-view.html">
                                <i class="iconfont">&#xe6a7;</i>
                               客户资源管理
                            </a>
                        </li>
                        
                        <li>
                            <a href="member-feedback.html">
                                <i class="iconfont">&#xe6a7;</i>
                                  客户反馈
                            </a>
                        </li>  
                        
                                                                                            <li>
                            <a href="member-usergroup.html">
                                <i class="iconfont">&#xe6a7;</i>
                                  客户组
                            </a>
                        </li>  
                    </ul>
                </li>
                <li class="list" >
                       <a href="javascript:;">
                        <i class="iconfont">&#xe6b2;</i>
                       员工管理
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu" >
                          <li>
                            <a href="member-employee.html">
                                <i class="iconfont">&#xe6a7;</i>
                                员工信息
                            </a>
                        </li>
                        
                         <li >
                            <a href="member-organization.html">
                                <i class="iconfont">&#xe6a7;</i>
                                组织机构
                            </a>
                        </li> 
                        
                                 <li>
                            <a href="member-employee-kiss.html">
                                <i class="iconfont">&#xe6a7;</i>
                                工作通知
                            </a>
                        </li> 
                        </li>
                    </ul>
                </li>
                <li class="list " >
                    <a href="javascript:;">
                        <i class="iconfont">&#xe705;</i>
                        项目管理
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu">
                             <li>
                            <a href="member-project.html">
                                <i class="iconfont">&#xe6a7;</i>
                                项目信息
                            </a>
                        </li>
                        
          
                        
                                     <li>
                            <a href="member-project-feedback.html">
                                <i class="iconfont">&#xe6a7;</i>
                                项目反馈
                            </a>
                        </li>
      
                                                   <li>
                            <a href="member-project-comment.html">
                                <i class="iconfont">&#xe6a7;</i>
                                项目评论
                            </a>
                        </li>
                        
                                                      <li>
                            <a href="member-project-ranking.html">
                                <i class="iconfont">&#xe6a7;</i>
                                项目排名
                            </a>
                        </li>
                        
    
                    </ul>
                </li>
                
                <li class="list" >
                  <a href="javascript:;">
                        <i class="layui-icon">&#xe62e;</i>
                        活动管理
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu">
                        <li>
                            <a href="manage-activity.html">
                                <i class="iconfont">&#xe6a7;</i>
                                活动信息
                            </a>
                        </li>
                    </ul>
                </li>
                
                <li class="list" >
                  <a href="javascript:;">
                        <i class="layui-icon">&#xe600;</i>
                        订单管理
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu">
                        <li>
                            <a href="manage-order.html">
                                <i class="iconfont">&#xe6a7;</i>
                                订单信息
                            </a>
                        </li>
                    </ul>
                </li>
                
                <li class="list" >
                    <a href="javascript:;">
                        <i class="layui-icon">&#xe62c;</i>
                        系统统计
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu opened">
                        <li>
                            <a href="toRqProject">
                                <i class="iconfont">&#xe6a7;</i>
                                项目人气
                            </a>
                        </li>
                        <li>
                            <a href="toMonthSr">
                                <i class="iconfont">&#xe6a7;</i>
                                每月收入
                            </a>
                        </li>
                        <li>
                            <a href="toRqTeacher">
                                <i class="iconfont">&#xe6a7;</i>
                                 项目满意度对比
                            </a>
                        </li>
                        <li >
                            <a href="toRqActivity">
                                <i class="iconfont">&#xe6a7;</i>
                                人气活动
                            </a>
                        </li>
                        <li  class="current">
                            <a href="toMothKh">
                                <i class="iconfont">&#xe6a7;</i>
                                每月订单量
                            </a>
                        </li>
                        <li>
                            <a href="toYgKq">
                                <i class="iconfont">&#xe6a7;</i>
                                项目差评数
                            </a>
                        </li>
                        <li>
                            <a href="toQuestion">
                                <i class="iconfont">&#xe6a7;</i>
                                问卷调查
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="list">
                  <a href="javascript:;">
                        <i class="layui-icon">&#xe614;</i>
                        系统管理
                        <i class="iconfont nav_right">&#xe697;</i>
                    </a>
                    <ul class="sub-menu">
                        <li>
                            <a href="manage-user.html">
                                <i class="iconfont">&#xe6a7;</i>
                                用户管理
                            </a>
                        </li>
                        
               
                        
                                     <li>
                            <a href="manage-plate.html">
                                <i class="iconfont">&#xe6a7;</i>
                                模块管理
                            </a>
                        </li>
                                                              <li>
                            <a href="manage-role.html">
                                <i class="iconfont">&#xe6a7;</i>
                                角色管理
                            </a>
                        </li>
                    </ul>
                </li>

            </ul>
          </div>
        </div>
        <!-- 左侧菜单结束 -->
        <!-- 右侧主体开始 -->
        <div class="page-content">
          <div class="content">
            <!-- 右侧内容框架，更改从这里开始 -->
            <blockquote class="layui-elem-quote">
               每月订单量统计
            </blockquote>
             <div class="">
                	<label class="layui-form-label">年份:</label>
                	<select class="layui-select" id="select" onchange="show()" style="width: 150px;">
                		<option th:each="itme,state : ${years}" th:text="${itme.years}">
                			
                		</option>
                	</select>
                	
            </div>
            <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
            <div id="main" style="width: 100%;height:400px;"></div>
            <blockquote class="layui-elem-quote" style="text-align: center;">
           		<p style="font-size:20px;font-weight:600;">每月订单量数据图</p>
            	<a id="daoru" class="layui-btn" style="position:absolute;right: 50px;top:540px" onclick="daoru()" >生成Excel文件</a>
                <br>
                <table class="layui-table" >
  					<thead>
  						<tr>
  							<th>月份</th>
  							<th>订单量</th>
  						</tr>
  					</thead>
  					<tbody id="tb">
  							
  					</tbody>
				</table>
            </blockquote>
            <!-- 右侧内容框架，更改从这里结束 -->
          </div>
        </div>
        <!-- 右侧主体结束 -->
    </div>
    <!-- 中部结束 -->
    <!-- 底部开始 -->
    <div class="footer">
        <div class="copyright">Copyright ©2019 研学旅行管理系统</div>  
    </div>
    <!-- 底部结束 -->
    <!-- 背景切换开始 -->
    <div class="bg-changer">
        <div class="swiper-container changer-list">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><img class="item" src="./images/a.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/b.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/c.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/d.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/e.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/f.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/g.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/h.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/i.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/j.jpg" alt=""></div>
                <div class="swiper-slide"><img class="item" src="./images/k.jpg" alt=""></div>
                <div class="swiper-slide"><span class="reset">初始化</span></div>
            </div>
        </div>
        <div class="bg-out"></div>
        <div id="changer-set"><i class="iconfont">&#xe696;</i></div>   
    </div>
    <!-- 背景切换结束 -->
        
        <script src="http://cdn.bootcss.com/echarts/3.3.2/echarts.min.js" charset="utf-8"></script>
        <script type="text/javascript" th:src="@{/js/echarts-for-x-admin.js}"></script>
		<script type="text/javascript" th:src="@{/js/vue.js}" ></script>
        <script type="text/javascript">
        var vue = new Vue({
      		 
      		 el:".bg-out",
      		 data : {
      			 data : [],
      			series:[]
      		 }
      		 
      	 });
        
      	 function daoru(){
    		var years = $("#select").val();
     		MonthsDdExcel = "http://localhost:8080/MonthsDdExcel?years="+years;
     		window.location.href=MonthsDdExcel; 
     	}
        show();
        function show(){
        	var id = $("#select").val();
          	 $.ajax({
     			url:"http://localhost:8080/toAjaxMonthOr",
     			data:{
     				years:id
     			},
     			type:"post",
     			dataType:"json",
     			success:function(data){
     					vue.data=data;
     					begin();
     					happy(id);
     			}
     			
     		});
        }
        
        function happy(years){
        	$.ajax({
     			url:"http://localhost:8080/toAjaxMonthOrtwo",
     			data:{
     				years:years
     			},
     			type:"post",
     			dataType:"json",
     			success:function(data){
     				var user='';
     				for(var i =0;i<data.length;i++){
     					user+="<tr>";
						user+="<td>"+data[i].months+"</td>";
						user+="<td>"+data[i].sum+"</td>";
						user+="</tr>";
					}
     				$("#tb").html(" ");
					$("#tb").append(user);
     			}
     			
     		});
        }
        
        function begin(){
        	
        	setTimeout(function(){
        	var dom = document.getElementById("main");
        	var myChart = echarts.init(dom);
        	var app = {};
        	option = null;
        	option = {
          			 toolbox: {
            				show: true,
                         feature: {
                             dataZoom: {
                                 yAxisIndex: 'none'
                             },
                             magicType: {type: ['line', 'bar']},
                             restore: {},
                             saveAsImage: {}
                         },
                         itemSize:18,//工具栏 icon 的大小
                         iconStyle:{
                             normal:{
                               borderColor:'skyblue',
                               
                             }
                         
                         }
                      },
        	    xAxis: {
        	        type: 'category',
        	        data: ['一月', '二月', '三月', '四月', '五月', '六月', '七月','八月', '九月', '十月', '十一月', '十二月']
        	    },
        	    yAxis: {
        	        type: 'value'
        	    },
        	    series: [{
        	        data: vue.data,
        	        type: 'line',
        	        smooth: true
        	    }]
        	};
        	;
        	if (option && typeof option === "object") {
        	    myChart.setOption(option, true);
        	}
        	},100);
        	
        };
        
        

    	</script>
        
        
</body>
</html>